# 史记知识库 - 完整实体标注方案

基于对《五帝本纪》的详细NER分析，本文档提供完整的实体标注体系。

## 一、现有实体类型（已实现）

| 标记符号 | 实体类型 | CSS类名 | 颜色 | 示例 |
|---------|---------|---------|------|------|
| `@人名@` | 人名 | person | #8B4513 棕色 | @黄帝@ @轩辕@ |
| `=地名=` | 地名 | place | #B8860B 金黄 | =阪泉之野= =涿鹿= |
| `$官职$` | 官职 | official | #8B0000 深红 | $天子$ $云师$ |
| `%时间%` | 时间 | time | #008B8B 青色 | %七十年% %三年% |
| `&朝代&` | 朝代/氏族 | dynasty | #9370DB 紫色 | &神农氏& &蜀山氏& |
| `^制度^` | 制度/典章 | institution | #4682B4 钢蓝 | ^五典^ ^五刑^ |
| `~族群~` | 族群/部落 | tribe | #2F4F4F 深灰 | ~荤粥~ ~三苗~ |
| `*器物*` | 器物/书名 | artifact | #CD853F 秘鲁棕 | *宝鼎* *璿玑玉衡* |
| `!天文!` | 天文/历法 | astronomy | #483D8B 深蓝紫 | !星鸟! !闰月! |
| `?神话?` | 神话/传说 | mythical | #8B008B 深洋红 | ?浑沌? ?饕餮? |
| `🌿动植物🌿` | 动植物 | flora-fauna | #228B22 森林绿 | 🌿熊🌿 🌿百穀🌿 |

## 二、建议新增实体类型

### 高优先级（强烈推荐）

#### 1. 方位词 `<方位>`
- **CSS类名**: `direction`
- **建议颜色**: `#FF8C00` (深橙色)
- **标注价值**: ⭐⭐⭐⭐⭐
- **说明**: 方位词在地理、政治、文化观念中具有重要意义，与华夷观念、疆域治理密切相关
- **示例**:
  - `<东>至于=海=`
  - `<西>至于=空桐=`
  - `<南>至于=江=`
  - `<北>逐~荤粥~`
  - `<四方>`、`<上下>`

#### 2. 颜色词 `#颜色#`
- **CSS类名**: `color`
- **建议颜色**: `#DC143C` (深红色)
- **标注价值**: ⭐⭐⭐⭐⭐
- **说明**: 颜色在古代具有重要象征意义，与五行、礼制、等级密切相关
- **示例**:
  - `#黄#收纯衣` (土德)
  - `#彤#车乘#白#马`
  - `其色#郁郁#`

#### 3. 自然现象 `☀现象☀`
- **CSS类名**: `phenomenon`
- **建议颜色**: `#FF6347` (番茄红)
- **标注价值**: ⭐⭐⭐⭐⭐
- **说明**: 自然现象与灾异思想、政治合法性相关
- **示例**:
  - `☀日月星辰☀`
  - `☀风雨☀所至`
  - `☀烈风雷雨☀不迷`
  - `☀洪水☀滔天`

### 中优先级（推荐）

#### 4. 数字/数量 `#数字#`
- **CSS类名**: `number`
- **建议颜色**: `#4169E1` (皇家蓝)
- **标注价值**: ⭐⭐⭐⭐
- **说明**: 数字在史书中具有重要意义，特别是年份、人数、地理数据
- **示例**:
  - `@黄帝@#二十五#子`
  - `其得姓者#十四#人`
  - `方#五千#里`

#### 5. 德行/品质 `【德行】`
- **CSS类名**: `virtue`
- **建议颜色**: `#DAA520` (金杆色)
- **标注价值**: ⭐⭐⭐⭐
- **说明**: 德行是儒家史学的核心评价标准
- **示例**:
  - `以【孝】闻`
  - `【仁】而威，【惠】而【信】`
  - `【顽】【凶】，不用`

### 低优先级（可选）

#### 6. 材料/物质 `◆材料◆`
- **CSS类名**: `material`
- **建议颜色**: `#8B7355` (土褐色)
- **标注价值**: ⭐⭐⭐
- **说明**: 材料与经济、礼制、工艺相关
- **示例**:
  - `水波土石◆金玉◆`
  - `节用◆水火◆材物`
  - `◆金◆作^赎刑^`

## 三、动植物详细清单

### 动物类（17种）

| 动物 | 标注 | 出现位置 | 说明 |
|-----|------|---------|------|
| 熊 | 🌿熊🌿 | [1.1] | 教熊罴貔貅貙虎 |
| 罴 | 🌿罴🌿 | [1.1], [23.2.6] | 同上，也作人名 |
| 貔 | 🌿貔🌿 | [1.1] | 猛兽 |
| 貅 | 🌿貅🌿 | [1.1] | 猛兽 |
| 貙 | 🌿貙🌿 | [1.1] | 猛兽 |
| 虎 | 🌿虎🌿 | [1.1] | 猛兽 |
| 鸟兽 | 🌿鸟兽🌿 | [3], [11.1-4], [23.2.6] | 泛指飞禽走兽 |
| 蟲蛾 | 🌿蟲蛾🌿 | [3] | 昆虫类 |
| 凤凰 | 🌿凤凰🌿 | [24.9] | 祥瑞之鸟 |
| 百兽 | 🌿百兽🌿 | [23.2.8] | 百兽率舞 |
| 牛羊 | 🌿牛🌿🌿羊🌿 | [20], [20.2] | 家畜 |
| 特牛 | 🌿特牛🌿 | [14.1] | 祭祀用牲畜 |
| 螭魅 | 🌿螭魅🌿 | [22.6] | 妖怪类（可用?神话?） |
| 龙 | 🌿龙🌿 或 ?龙? | [23.2.9] | 作人名，也可标为神话 |
| 象 | 🌿象🌿 | [18], [20.2] | 作人名 |
| 鸟 | 🌿鸟🌿 | [11.1] | 星鸟（星宿名） |
| 鸟夷 | ~鸟夷~ | [24.9] | 部族名（已标注） |

### 植物类（2种）

| 植物 | 标注 | 出现位置 | 说明 |
|-----|------|---------|------|
| 百穀 | 🌿百穀🌿 | [3], [23.2.2], [24.5] | 各种粮食作物 |
| 草木 | 🌿草木🌿 | [3], [23.2.6] | 泛指植物 |

**注**: 文中"五种"指五谷，但未具体列举禾、麦等。

## 四、标注优先级建议

### 第一阶段（立即实施）
1. ✅ 动植物 `🌿🌿` - 已实现
2. 方位词 `<>` - 高价值，建议立即添加
3. 颜色词 `##` - 高价值，建议立即添加

### 第二阶段（近期实施）
4. 自然现象 `☀☀` - 与天文类可合并
5. 数字 `##` - 补充现有时间标注
6. 德行品质 `【】` - 史学评价核心

### 第三阶段（长期完善）
7. 材料物质 `◆◆`
8. 其他细分类型

## 五、标注示例

### 示例1：综合标注
**原文**:
```
时播百穀草木，淳化鸟兽蟲蛾，旁罗日月星辰水波土石金玉
```

**标注后**:
```
时播🌿百穀🌿🌿草木🌿，淳化🌿鸟兽🌿🌿蟲蛾🌿，旁罗☀日月星辰☀◆水波土石金玉◆
```

### 示例2：方位标注
**原文**:
```
东至于海，登丸山，及岱宗。西至于空桐，登鸡头。南至于江，登熊、湘。北逐荤粥，合符釜山
```

**标注后**:
```
<东>至于=海=，登=丸山=，及=岱宗=。<西>至于=空桐=，登=鸡头=。<南>至于=江=，登=熊=、=湘=。<北>逐~荤粥~，合符=釜山=
```

### 示例3：颜色标注
**原文**:
```
富而不骄，贵而不舒。黄收纯衣，彤车乘白马
```

**标注后**:
```
富而不骄，贵而不舒。#黄#收#纯#衣，#彤#车乘#白#马
```

## 六、技术实现清单

### 需要添加到 render_shiji_html.py 的模式

```python
# 新增实体模式（按优先级排序）
NEW_ENTITY_PATTERNS = [
    # 方位词（高优先级）
    (r'<([^<>"]+)>', r'<span class="direction" title="方位">\1</span>'),

    # 颜色词（高优先级）- 注意：需要在 # 标题之前处理
    (r'#([^#<>"]+)#', r'<span class="color" title="颜色">\1</span>'),

    # 自然现象（高优先级）
    (r'☀([^☀<>"]+)☀', r'<span class="phenomenon" title="自然现象">\1</span>'),

    # 数字（中优先级）
    (r'#([^#<>"]+)#', r'<span class="number" title="数字">\1</span>'),

    # 德行（中优先级）
    (r'【([^【】<>"]+)】', r'<span class="virtue" title="德行">\1</span>'),

    # 材料（低优先级）
    (r'◆([^◆<>"]+)◆', r'<span class="material" title="材料">\1</span>'),
]
```

### 需要添加到 shiji-styles.css 的样式

```css
/* 方位词样式 */
.direction {
    color: #FF8C00;
    font-weight: 500;
    cursor: help;
}

/* 颜色词样式 */
.color {
    color: #DC143C;
    font-weight: 500;
    cursor: help;
}

/* 自然现象样式 */
.phenomenon {
    color: #FF6347;
    font-style: italic;
    cursor: help;
}

/* 数字样式 */
.number {
    color: #4169E1;
    font-family: 'Courier New', monospace;
    cursor: help;
}

/* 德行样式 */
.virtue {
    color: #DAA520;
    font-weight: 500;
    cursor: help;
}

/* 材料样式 */
.material {
    color: #8B7355;
    cursor: help;
}
```

## 七、下一步行动

1. **立即**: 完成动植物标注（使用 🌿🌿）
2. **近期**: 实现方位词和颜色词标注
3. **中期**: 添加自然现象和数字标注
4. **长期**: 完善德行和材料标注

## 八、标注原则

1. **一致性**: 同类实体使用相同标记
2. **优先级**: 先标注高价值实体
3. **可读性**: 避免过度标注影响阅读
4. **语义性**: 标注应反映实体的语义功能
5. **可扩展**: 预留新实体类型的空间
