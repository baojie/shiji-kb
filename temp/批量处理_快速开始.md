# 《史记》101-130章节批量处理 - 快速开始

## 🚀 一键启动（最简单）

```bash
cd /home/baojie/work/shiji-kb
./scripts/start_processing.sh
```

这个脚本会：
- ✅ 自动检查环境
- ✅ 引导设置API密钥
- ✅ 提供多种处理选项
- ✅ 显示处理进度

---

## 📋 三步快速开始

### 第一步：设置API密钥

```bash
export ANTHROPIC_API_KEY="your_api_key_here"
```

### 第二步：运行处理脚本

```bash
cd /home/baojie/work/shiji-kb
python3 scripts/process_chapters_101_130_robust.py
```

### 第三步：查看结果

```bash
ls -lh chapter_md/1*_*.tagged.md
```

---

## 📁 关键文件位置

### 脚本文件

| 文件 | 说明 | 推荐 |
|-----|------|------|
| `scripts/start_processing.sh` | 交互式启动脚本 | ⭐⭐⭐ 最简单 |
| `scripts/process_chapters_101_130_robust.py` | 增强版处理脚本 | ⭐⭐⭐ 推荐 |
| `scripts/process_chapters_101_130.py` | 基础版处理脚本 | ⭐ 备用 |

### 文档文件

| 文件 | 说明 |
|-----|------|
| `批量处理_快速开始.md` | 快速开始指南（本文件） |
| `README_处理101-130章节.md` | 详细使用说明 |
| `批量处理101-130章节_完成报告.md` | 完成状态报告 |

### 数据文件

| 位置 | 说明 |
|-----|------|
| `docs/original_text/1*_*.txt` | 原始文本（30个文件） |
| `chapter_md/1*_*.tagged.md` | 处理结果（将生成30个文件） |
| `progress_101_130.json` | 处理进度（自动生成） |

### 示例文件

| 文件 | 说明 |
|-----|------|
| `chapter_md/101_袁盎晁错列传.tagged.md` | ✅ 已完成的示例 |

---

## 🎯 处理的章节

### 101-110（第一批）
- ✅ 101_袁盎晁错列传（已完成）
- 102_张释之冯唐列传
- 103_万石张叔列传
- 104_田叔列传
- 105_扁鹊仓公列传
- 106_吴王濞列传
- 107_魏其武安侯列传
- 108_韩长孺列传
- 109_李将军列传
- **110_匈奴列传** ⭐⭐

### 111-120（第二批）
- **111_卫将军骠骑列传** ⭐⭐
- 112_平津侯主父列传
- 113_南越列传
- 114_东越列传
- 115_朝鲜列传
- 116_西南夷列传
- **117_司马相如列传** ⭐⭐
- 118_淮南衡山列传
- 119_循吏列传
- 120_汲郑列传

### 121-130（第三批）
- 121_儒林列传
- 122_酷吏列传
- 123_大宛列传
- 124_游侠列传
- 125_佞幸列传
- 126_滑稽列传
- 127_日者列传
- 128_龟策列传
- 129_货殖列传
- **130_太史公自序** ⭐⭐⭐⭐⭐（最重要！）

---

## ⚡ 常见问题

### Q: 如何设置API密钥？

**A:** 运行以下命令：
```bash
export ANTHROPIC_API_KEY="your_api_key_here"
```

或者直接运行 `./scripts/start_processing.sh`，脚本会引导你输入。

### Q: 如何查看进度？

**A:** 查看进度文件：
```bash
cat progress_101_130.json
```

或运行：
```bash
./scripts/start_processing.sh
# 然后选择选项 4
```

### Q: 处理中断了怎么办？

**A:** 直接重新运行脚本，它会自动跳过已完成的章节：
```bash
python3 scripts/process_chapters_101_130_robust.py
```

### Q: 如何只处理特定章节？

**A:** 编辑 `scripts/process_chapters_101_130_robust.py`，修改 `CHAPTERS` 列表。

### Q: 处理需要多长时间？

**A:**
- 单个章节：2-5分钟
- 全部30章：1-2.5小时
- 可以随时中断，下次继续

### Q: 如何验证处理质量？

**A:** 查看示例文件：
```bash
cat chapter_md/101_袁盎晁错列传.tagged.md | head -50
```

---

## 📊 预期结果

完成后，你将拥有：

✅ **30个结构化Markdown文件**
- 清晰的层级结构（一级、二级、三级标题）
- 圣经式段落编号 ([1.1], [1.2], ...)
- 完整的实体标注

✅ **完整的实体标注**
- 人名: @人名@
- 地名: =地名=
- 官职: $官职$
- 族群: ~族群~（民族列传）
- 其他8种实体类型

✅ **高质量的结构化数据**
- 可用于知识图谱
- 可用于语义搜索
- 可用于历史研究

---

## 🛠️ 技术规格

- **AI模型**: Claude Sonnet 4 (claude-sonnet-4-20250514)
- **输出格式**: Markdown with entity tags
- **编码**: UTF-8
- **处理模式**: Batch processing with checkpoints

---

## 📞 获取帮助

### 查看详细文档
```bash
cat README_处理101-130章节.md
```

### 查看完成报告
```bash
cat 批量处理101-130章节_完成报告.md
```

### 查看示例
```bash
cat chapter_md/101_袁盎晁错列传.tagged.md
```

---

## ✨ 特别提醒

### 130_太史公自序 ⭐⭐⭐⭐⭐

这是《史记》最重要的章节之一！包含：
- 司马氏家世
- 司马迁生平
- 李陵之祸
- 《史记》著述缘起
- 130篇目录总序

**需要特别细致地处理！**

---

## 🎉 开始吧！

运行这个命令开始处理：

```bash
./scripts/start_processing.sh
```

或者如果你喜欢直接命令：

```bash
export ANTHROPIC_API_KEY="your_key"
python3 scripts/process_chapters_101_130_robust.py
```

**祝处理顺利！** 📚✨
