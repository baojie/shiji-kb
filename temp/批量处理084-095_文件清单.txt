《史记》084-095章节批量处理 - 完整文件清单
════════════════════════════════════════════════════════════════

创建时间: 2026-02-06
任务: 批量处理《史记》084-095列传章节的标注工作

════════════════════════════════════════════════════════════════
一、核心处理文件
════════════════════════════════════════════════════════════════

1. scripts/process_chapters_084_095.py
   - 类型: Python脚本
   - 功能: 调用Claude API批量处理章节
   - 特点:
     * 支持11类实体标注
     * 自动生成结构化Markdown
     * 显示处理进度和统计
   - 使用: python3 scripts/process_chapters_084_095.py

2. scripts/start_processing_084_095.sh
   - 类型: Bash启动脚本
   - 功能: 交互式启动批处理
   - 特点:
     * 自动检查环境和依赖
     * 提示输入API密钥
     * 显示待处理章节列表
   - 使用: ./scripts/start_processing_084_095.sh
   - 权限: 已添加可执行权限 (chmod +x)

════════════════════════════════════════════════════════════════
二、文档说明文件
════════════════════════════════════════════════════════════════

3. 批量处理084-095章节_使用说明.md
   - 类型: Markdown文档
   - 内容:
     * 完整的标注规则（11类实体）
     * 列传特殊注意事项
     * 详细的使用方法
     * 故障排除指南
     * 输出格式示例
   - 适合: 详细阅读和参考

4. README_批量处理084-095.md
   - 类型: Markdown文档
   - 内容:
     * 快速开始指南
     * 文件清单和章节列表
     * 标注规则速查
     * 常见问题
   - 适合: 快速入门

5. QUICKSTART_084-095.txt
   - 类型: 纯文本快速参考卡
   - 内容:
     * 一页式快速参考
     * 启动命令
     * 检查清单
     * 标注规则速查
   - 适合: 打印或快速查看

6. 批量处理084-095_文件清单.txt (本文件)
   - 类型: 纯文本清单
   - 内容: 所有创建文件的完整列表和说明

════════════════════════════════════════════════════════════════
三、输入文件（已存在）
════════════════════════════════════════════════════════════════

位置: docs/original_text/

084_屈原贾生列传.txt         (12 KB)
085_吕不韦列传.txt           (6.5 KB)
086_刺客列传.txt             (20 KB)
087_李斯列传.txt             (26 KB)
088_蒙恬列传.txt             (6.1 KB)
089_张耳陈馀列传.txt         (15 KB)
090_魏豹彭越列传.txt         (5.6 KB)
091_黥布列传.txt             (10 KB)
092_淮阴侯列传.txt           (22 KB)
093_韩信卢绾列传.txt         (9.8 KB)
094_田儋列传.txt             (6.2 KB)
095_樊郦滕灌列传.txt         (16 KB)

总计: 12个章节，约155 KB

════════════════════════════════════════════════════════════════
四、输出文件（待生成）
════════════════════════════════════════════════════════════════

位置: chapter_md/

084_屈原贾生列传.tagged.md
085_吕不韦列传.tagged.md
086_刺客列传.tagged.md
087_李斯列传.tagged.md
088_蒙恬列传.tagged.md
089_张耳陈馀列传.tagged.md
090_魏豹彭越列传.tagged.md
091_黥布列传.tagged.md
092_淮阴侯列传.tagged.md
093_韩信卢绾列传.tagged.md
094_田儋列传.tagged.md
095_樊郦滕灌列传.tagged.md

总计: 12个Markdown文件（处理后生成）

════════════════════════════════════════════════════════════════
五、使用流程
════════════════════════════════════════════════════════════════

步骤1: 查看快速参考
  cat QUICKSTART_084-095.txt

步骤2: 阅读使用说明（可选）
  cat README_批量处理084-095.md
  或
  查看 批量处理084-095章节_使用说明.md

步骤3: 准备环境
  pip3 install anthropic                    # 安装依赖
  export ANTHROPIC_API_KEY="your_key"      # 设置密钥

步骤4: 启动处理
  方法A（推荐）:
    ./scripts/start_processing_084_095.sh

  方法B（直接）:
    python3 scripts/process_chapters_084_095.py

步骤5: 查看结果
  ls -lh chapter_md/0[89]?_*.tagged.md

步骤6: 验证质量
  使用 scripts/validate_tagging.py 检查标注

步骤7: 提交代码
  git add chapter_md/
  git commit -m "Add tagged chapters 084-095"

════════════════════════════════════════════════════════════════
六、技术规格
════════════════════════════════════════════════════════════════

Claude模型: claude-sonnet-4-20250514
Temperature: 0
Max tokens: 16000
编码: UTF-8
输出格式: Markdown

标注类型: 11类实体
- 人名 (@)
- 地名 (=)
- 官职 ($)
- 时间 (%)
- 朝代 (&)
- 制度 (^)
- 族群 (~)
- 器物 (*)
- 天文 (!)
- 神话 (?)
- 动植物 (🌿)

════════════════════════════════════════════════════════════════
七、预期结果
════════════════════════════════════════════════════════════════

处理时间: 10-15分钟
Token消耗: 80,000-120,000 tokens
成功率: 预期100% (所有章节)

输出文件特点:
✓ 结构化Markdown格式
✓ 圣经式段落编号 [章.节]
✓ 完整的实体标注
✓ 对话使用引用块
✓ 合传按人物分节

════════════════════════════════════════════════════════════════
八、后续维护
════════════════════════════════════════════════════════════════

如需重新处理某个章节:
1. 删除对应的 .tagged.md 文件
2. 重新运行处理脚本

如需修改标注规则:
1. 编辑 scripts/process_chapters_084_095.py
2. 修改 SYSTEM_PROMPT 中的标注规则
3. 重新处理章节

如需处理其他章节:
1. 复制 process_chapters_084_095.py
2. 修改 CHAPTERS 列表
3. 运行新脚本

════════════════════════════════════════════════════════════════
九、注意事项
════════════════════════════════════════════════════════════════

1. API密钥安全
   - 不要将API密钥提交到Git
   - 使用环境变量传递
   - 启动脚本会隐藏输入的密钥

2. 网络要求
   - 需要稳定的网络连接
   - Claude API访问权限
   - 建议在网络稳定时处理

3. 处理顺序
   - 按章节顺序处理
   - 可以中途停止（Ctrl+C）
   - 已处理的文件会保存

4. 文件覆盖
   - 如果输出文件已存在
   - 脚本会直接覆盖
   - 建议先备份重要文件

════════════════════════════════════════════════════════════════
十、文件验证
════════════════════════════════════════════════════════════════

检查所有文件是否存在:

  ls -lh scripts/process_chapters_084_095.py
  ls -lh scripts/start_processing_084_095.sh
  ls -lh 批量处理084-095章节_使用说明.md
  ls -lh README_批量处理084-095.md
  ls -lh QUICKSTART_084-095.txt
  ls -lh 批量处理084-095_文件清单.txt

检查脚本语法:

  python3 -m py_compile scripts/process_chapters_084_095.py
  bash -n scripts/start_processing_084_095.sh

检查执行权限:

  ls -l scripts/*084_095*

════════════════════════════════════════════════════════════════
准备完成！所有文件已创建，可以开始批量处理。
════════════════════════════════════════════════════════════════
