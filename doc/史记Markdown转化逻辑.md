# 《史记》语义化 Markdown 转化逻辑

本文档旨在详述将《史记》原始或改进后的文本（TXT）转化为具有语义结构的 Markdown 格式的准则。核心原则是**体现文本的内在逻辑关系**。

---

## 1. 层级结构 (Hierarchical Structure)

### 1.1 标题等级

- **一级标题 (`#`)**: 章节全名 (如 `# 五帝本纪`)。
- **二级标题 (`##`)**: 主体人物、时期或大的叙事单元 (如帝王名 `## 黄帝`)。
- **三级标题 (`###`)**: 核心人物下的具体维度，如“疆域治理”、“家世背景”、“轶事传说”等。

### 1.2 内容分隔

- 在重大的逻辑转换点（如从一位帝王切换到另一位帝王）使用水平分割线 (`---`)。

---

## 2. 并列结构 (Parallel Structure)

对于古代汉语中常见的列举性、并列性内容，应当采用 Markdown 列表以提升结构化水平：

- **血缘/世系**: 如列举子嗣及其封地。
- **官制/职责**: 明确各官员的职能。
- **地理/方位**: 如东南西北的具体疆域描述。
- **历法/节气**: 如羲和四子的季节职责。

**示例**:

> - 其一曰**玄嚣**，是为青阳；
> - 其二曰**昌意**，降居若水。

---

## 3. 语义化增强 (Semantic Enhancement)

利用特定的 Markdown 语法来区分不同性质的文本内容：

### 3.1 轶事与侧写

- 针对篇幅较长、具有故事性或独立性的片段（如“舜受磨难”），使用 **警告/注意框 (`> [!NOTE]`)** 进行视觉隔离，突出其叙事地位。

### 3.2 评价与总结

- **太史公曰**: 保留作为章节收尾的固定板块，使用 `## 太史公曰`。
- **赞 (Zan)**: 针对文末押韵的总结性文字，使用 **引用块 (`> `)** 格式，体现其文学性。

### 3.3 实体高亮

- 在正文中对**人名**、**官名**等关键实体使用 **加粗 (`**`)\*\* 处理，便于快速扫读。

---

## 4. 逻辑关系识别准则

在处理每一章时，需识别以下语义信号：

- **起始标志**: “XX者”、“维XX”等通常预示新人物或新篇章的开启。
- **职责分配**: “命XX”、“以XX为XX”等语义对应列表。
- **时间演进**: 描述人物一生阶段（如“年二十”、“年三十”）的文字，可考虑使用加粗引导词或列表。
- **方位描述**: “东至于”、“西至于”等具有强对比性的文字对应列表或表格。

---

## 5. 预期效果

通过上述逻辑转化，文本从单一的线性流转变为**多维结构体**。读者可以：

1. 快速通过大纲了解全篇脈络。
2. 直观对比并列内容（如职能分布）。
3. 区分叙事内容与作者点评。

---

## 6. 溯源与编号系统 (Traceability & Numbering)

为了确保文本的可溯源性，并支持细粒度的引用，采用两级编号系统。

### 6.1 原始段落编号

- TXT 源文件中的每一个自然段落都分配一个唯一的序号，格式为 `[N]` (如 `[1]`, `[2]`)。
- 此序号在 Markdown 转化过程中**必须保留**，且置于该段落（或该段落拆分出的第一部分）的开头。

### 6.2 结构化子编号

- 当源文件中的一个段落因为语义结构（如列表、对话、分项描述）被拆分为多个 Markdown 区块时，使用子编号。
- 格式为 `[N.M]` (如 `[4.1]`, `[4.2]`)。
- **目的**: 确保源文件的一个段落 `[N]` 的内容完整对应 Markdown 中的 `[N]` 及其所有 `[N.M]` 子项，不重不漏。

### 6.3 忠实原则 (Fidelity)

- **原文保留**: Markdown 中的所有文本内容必须与源文件完全一致。
- **禁止修改**: 严禁修改、删除或增加原文中的任何汉字。
- **仅增格式**: 所有的转化工作仅限于添加 Markdown 标记（标题、列表符号、粗体等）和编号标签，绝不触碰文本本身。
