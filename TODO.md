# å²è®°çŸ¥è¯†åº“ - TODO åˆ—è¡¨

## ğŸš€ åŠŸèƒ½å»ºè®®

### é«˜ä¼˜å…ˆçº§

- [x] **PN (Purple Numbers) å¯ç‚¹å‡»å¤åˆ¶åŠŸèƒ½** âœ…
  - æ¯ä¸ªæ®µè½ç¼–å·éƒ½æ˜¯å¯ç‚¹å‡»çš„é”šç‚¹é“¾æ¥
  - ç‚¹å‡» PN è‡ªåŠ¨å¤åˆ¶å¸¦é”šç‚¹çš„å®Œæ•´ URL åˆ°å‰ªè´´æ¿
  - å¤åˆ¶æˆåŠŸåæ˜¾ç¤º âœ“ æç¤º
  - ä¾¿äºç²¾ç¡®å¼•ç”¨å’Œåˆ†äº«ç‰¹å®šæ®µè½
  - å®ç°äº† Doug Engelbart çš„ Purple Numbers ç†å¿µ

- [ ] **å®ä½“äº¤å‰å¼•ç”¨è·³è½¬**
  - é¼ æ ‡æ‚¬åœåœ¨å®ä½“ä¸Šæ—¶ï¼Œæ˜¾ç¤ºè¯¥å®ä½“åœ¨æœ¬æ–‡ä¸­çš„å…¶ä»–å‡ºç°ä½ç½®
  - æä¾›å¿«æ·è·³è½¬é“¾æ¥åˆ°å…¶ä»–æ®µè½
  - å®ç°æ–¹å¼ï¼š
    - åœ¨ç”Ÿæˆ HTML æ—¶ï¼Œä¸ºæ¯ä¸ªå®ä½“æ·»åŠ å”¯ä¸€ ID
    - ä½¿ç”¨ JavaScript æ”¶é›†åŒåå®ä½“çš„æ‰€æœ‰ä½ç½®
    - åœ¨ tooltip ä¸­æ˜¾ç¤ºè·³è½¬é“¾æ¥åˆ—è¡¨
  - ç¤ºä¾‹ï¼šé¼ æ ‡ç§»åˆ°"èˆœ"ä¸Šï¼Œæ˜¾ç¤º"æœ¬æ–‡ä¸­å…¶ä»–å‡ºç°ï¼šæ®µè½ 1.2, 3.4, 5.6..."

### ä¸­ä¼˜å…ˆçº§

- [ ] **ç« èŠ‚é—´äº¤å‰å¼•ç”¨**
  - å®ä½“è·¨ç« èŠ‚å¼•ç”¨ï¼ˆå¦‚"èˆœ"åœ¨å¤šä¸ªæœ¬çºªä¸­å‡ºç°ï¼‰
  - éœ€è¦å»ºç«‹å…¨å±€å®ä½“ç´¢å¼•
  - åœ¨ tooltip ä¸­æ˜¾ç¤º"å¦è§ï¼šå¤æœ¬çºª æ®µè½ 2.3"

- [ ] **å®ä½“è¯¦æƒ…é¢æ¿**
  - ç‚¹å‡»å®ä½“åï¼Œåœ¨ä¾§è¾¹æ æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
  - åŒ…å«ï¼šæ‰€æœ‰å‡ºç°ä½ç½®ã€ç›¸å…³å®ä½“ã€æ—¶é—´çº¿ç­‰

- [ ] **æœç´¢åŠŸèƒ½**
  - å…¨æ–‡æœç´¢
  - æŒ‰å®ä½“ç±»å‹ç­›é€‰
  - æŒ‰ç« èŠ‚ç­›é€‰

### ä½ä¼˜å…ˆçº§

- [ ] **æ—¶é—´çº¿å¯è§†åŒ–**
  - å°†æ ‡æ³¨çš„æ—¶é—´ä¿¡æ¯å¯è§†åŒ–
  - æ˜¾ç¤ºå†å²äº‹ä»¶çš„æ—¶é—´é¡ºåº

- [ ] **å…³ç³»å›¾è°±**
  - äººç‰©å…³ç³»å›¾
  - åœ°ç†ä½ç½®å›¾
  - äº‹ä»¶å…³è”å›¾

- [ ] **æ³¨é‡Šç³»ç»Ÿ**
  - ç”¨æˆ·å¯ä»¥æ·»åŠ ä¸ªäººæ³¨é‡Š
  - æ”¯æŒå¯¼å‡º/å¯¼å…¥æ³¨é‡Š

## ğŸ› Bug ä¿®å¤

- [x] åˆ—è¡¨åœ¨ NOTE å—ä¸­æ¸²æŸ“ä¸ºæ®µè½è€Œéåˆ—è¡¨é¡¹
- [x] åˆ—è¡¨é¡¹é—´è·è¿‡å¤§
- [x] HTML æ–‡ä»¶ä¸­åŒ…å«ç»å¯¹è·¯å¾„

## ğŸ¨ æ ·å¼ä¼˜åŒ–

- [x] å»é™¤åˆ—è¡¨é¡¹ç›®ç¬¦å·
- [x] è°ƒæ•´åˆ—è¡¨ç¼©è¿›ä¸º 2em
- [ ] å“åº”å¼è®¾è®¡ä¼˜åŒ–ï¼ˆç§»åŠ¨ç«¯ï¼‰
- [ ] æš—è‰²ä¸»é¢˜æ”¯æŒ
- [ ] å­—ä½“å¤§å°å¯è°ƒèŠ‚

## ğŸ“ å†…å®¹ç›¸å…³

- [ ] å®Œæˆæ›´å¤šç« èŠ‚çš„æ ‡æ³¨
- [ ] ç»Ÿä¸€å®ä½“æ ‡æ³¨è§„èŒƒ
- [ ] æ·»åŠ æ®µè½æ³¨é‡Šå’Œè§£é‡Š
- [ ] å®Œæˆå²è®°å’Œå¯é€‰çš„å¤ç±åï¼Œå®éªŒæ— ç‰ˆæƒå°è¯´ï¼ˆå¦‚ç¦å°”æ‘©æ–¯æ¢æ¡ˆé›†ï¼‰

## ğŸ”§ æŠ€æœ¯æ”¹è¿›

- [ ] å°†å®ä½“æ•°æ®æå–ä¸º JSON æ ¼å¼
- [ ] ä½¿ç”¨æ•°æ®åº“å­˜å‚¨å®ä½“ä¿¡æ¯
- [ ] æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•
- [ ] ä¼˜åŒ–æ„å»ºæµç¨‹
- [ ] æ·»åŠ  CI/CD è‡ªåŠ¨éƒ¨ç½²

## ğŸ“š æ–‡æ¡£

- [x] GitHub Pages é…ç½®æŒ‡å—
- [x] å‘å¸ƒè„šæœ¬ä½¿ç”¨è¯´æ˜
- [ ] æ ‡æ³¨è§„èŒƒæ–‡æ¡£
- [ ] å¼€å‘è€…æŒ‡å—
- [ ] API æ–‡æ¡£ï¼ˆå¦‚æœæœ‰åç«¯ï¼‰

## ğŸ’¡ å®ç°æ€è·¯ï¼šå®ä½“äº¤å‰å¼•ç”¨è·³è½¬

### æ–¹æ¡ˆ 1ï¼šçº¯å‰ç«¯å®ç°ï¼ˆæ¨èï¼‰

```javascript
// åœ¨é¡µé¢åŠ è½½æ—¶
document.addEventListener('DOMContentLoaded', function() {
    // 1. æ”¶é›†æ‰€æœ‰å®ä½“åŠå…¶ä½ç½®
    const entities = {};
    document.querySelectorAll('[class^="person"], [class^="place"], [class^="official"]').forEach((el, index) => {
        const text = el.textContent;
        const paraNum = el.closest('p')?.querySelector('.para-num')?.textContent || 'æœªçŸ¥';

        if (!entities[text]) {
            entities[text] = [];
        }

        // ä¸ºæ¯ä¸ªå®ä½“æ·»åŠ å”¯ä¸€ ID
        el.id = `entity-${index}`;
        entities[text].push({
            id: el.id,
            paraNum: paraNum,
            element: el
        });
    });

    // 2. ä¸ºæ¯ä¸ªå®ä½“æ·»åŠ æ‚¬åœäº‹ä»¶
    document.querySelectorAll('[class^="person"], [class^="place"], [class^="official"]').forEach(el => {
        el.addEventListener('mouseenter', function(e) {
            const text = this.textContent;
            const occurrences = entities[text];

            if (occurrences.length > 1) {
                showTooltip(e, text, occurrences);
            }
        });
    });
});

function showTooltip(event, entityName, occurrences) {
    // åˆ›å»ºå¹¶æ˜¾ç¤º tooltip
    const tooltip = document.createElement('div');
    tooltip.className = 'entity-tooltip';
    tooltip.innerHTML = `
        <strong>${entityName}</strong> åœ¨æœ¬æ–‡ä¸­å‡ºç° ${occurrences.length} æ¬¡ï¼š<br>
        ${occurrences.map(occ =>
            `<a href="#${occ.id}" class="jump-link">æ®µè½ ${occ.paraNum}</a>`
        ).join(', ')}
    `;
    // ... å®šä½å’Œæ˜¾ç¤ºé€»è¾‘
}
```

### æ–¹æ¡ˆ 2ï¼šæ„å»ºæ—¶ç”Ÿæˆç´¢å¼•

åœ¨ `render_shiji_html.py` ä¸­ï¼š
- æ”¶é›†æ‰€æœ‰å®ä½“åŠå…¶ä½ç½®
- ç”Ÿæˆå®ä½“ç´¢å¼• JSON
- åœ¨ HTML ä¸­åµŒå…¥ç´¢å¼•æ•°æ®
- å‰ç«¯è¯»å–ç´¢å¼•æ•°æ®æ˜¾ç¤º

---

**æœ€åæ›´æ–°**: 2026-01-23
