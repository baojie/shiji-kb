# 《史记》084-095章节批量处理 - 快速开始

## 一键启动

```bash
cd /home/baojie/work/shiji-kb
./scripts/start_processing_084_095.sh
```

## 准备工作

### 1. 安装依赖（如果尚未安装）

```bash
pip3 install anthropic
```

### 2. 设置API密钥

#### 方法A：环境变量（推荐）

```bash
export ANTHROPIC_API_KEY="your_api_key_here"
```

#### 方法B：启动脚本会提示输入

运行启动脚本时，如果未设置API密钥，脚本会提示您输入。

## 文件清单

本次准备的文件：

1. **处理脚本**: `scripts/process_chapters_084_095.py`
   - Python脚本，调用Claude API批量处理章节
   - 支持11类实体标注
   - 自动生成结构化Markdown

2. **启动脚本**: `scripts/start_processing_084_095.sh`
   - Bash启动脚本，带环境检查和交互式提示
   - 自动检查Python、依赖和API密钥
   - 显示处理进度和统计

3. **使用说明**: `批量处理084-095章节_使用说明.md`
   - 详细的使用说明和标注规则
   - 故障排除指南
   - 输出格式示例

4. **本文档**: `README_批量处理084-095.md`
   - 快速开始指南

## 待处理章节（12个）

| 编号 | 章节名 | 输入文件 | 输出文件 |
|------|--------|----------|----------|
| 084 | 屈原贾生列传 | `docs/original_text/084_屈原贾生列传.txt` | `chapter_md/084_屈原贾生列传.tagged.md` |
| 085 | 吕不韦列传 | `docs/original_text/085_吕不韦列传.txt` | `chapter_md/085_吕不韦列传.tagged.md` |
| 086 | 刺客列传 | `docs/original_text/086_刺客列传.txt` | `chapter_md/086_刺客列传.tagged.md` |
| 087 | 李斯列传 | `docs/original_text/087_李斯列传.txt` | `chapter_md/087_李斯列传.tagged.md` |
| 088 | 蒙恬列传 | `docs/original_text/088_蒙恬列传.txt` | `chapter_md/088_蒙恬列传.tagged.md` |
| 089 | 张耳陈馀列传 | `docs/original_text/089_张耳陈馀列传.txt` | `chapter_md/089_张耳陈馀列传.tagged.md` |
| 090 | 魏豹彭越列传 | `docs/original_text/090_魏豹彭越列传.txt` | `chapter_md/090_魏豹彭越列传.tagged.md` |
| 091 | 黥布列传 | `docs/original_text/091_黥布列传.txt` | `chapter_md/091_黥布列传.tagged.md` |
| 092 | 淮阴侯列传 | `docs/original_text/092_淮阴侯列传.txt` | `chapter_md/092_淮阴侯列传.tagged.md` |
| 093 | 韩信卢绾列传 | `docs/original_text/093_韩信卢绾列传.txt` | `chapter_md/093_韩信卢绾列传.tagged.md` |
| 094 | 田儋列传 | `docs/original_text/094_田儋列传.txt` | `chapter_md/094_田儋列传.tagged.md` |
| 095 | 樊郦滕灌列传 | `docs/original_text/095_樊郦滕灌列传.txt` | `chapter_md/095_樊郦滕灌列传.tagged.md` |

## 标注规则速查

```
@人名@          人物名称
=地名=          地理位置
$官职$          官职称谓
%时间%          时间纪年
&朝代&          朝代国号
^制度^          制度典章
~族群~          族群部落
*器物*          器物礼器
!天文!          天文历法
?神话?          传说神话
🌿动植物🌿      动物植物
```

## 处理流程

```
[读取原文] → [调用Claude API] → [智能标注] → [生成Markdown] → [保存文件]
```

每个章节约30-60秒，全部处理约10-15分钟。

## 预期输出示例

```markdown
# [0] 屈原贾生列传

## 屈原

### 早年与得志

[1.1] @屈原@者，名@平@，&楚&之$同姓$也。为&楚怀王&$左徒$。

[1.2] 博闻彊志，明於治乱，嫺於辞令。
```

## 质量检查要点

- ✅ 文档结构：标题层级正确
- ✅ 段落编号：圣经式编号连续
- ✅ 实体标注：人名、地名、官职等完整标注
- ✅ 对话处理：使用引用块，长对话有NOTE说明
- ✅ 合传处理：多人列传按人物划分二级标题

## 常见问题

**Q: 如何检查处理进度？**
A: 脚本会实时显示每个章节的处理状态和统计信息。

**Q: 处理失败怎么办？**
A: 脚本会自动重试，并在最后显示失败章节列表。

**Q: 可以中途停止吗？**
A: 可以用 Ctrl+C 停止，已处理的章节会保存。

**Q: 如何只处理某几个章节？**
A: 编辑 `scripts/process_chapters_084_095.py`，修改 `CHAPTERS` 列表。

## 下一步

处理完成后：

1. 查看输出文件：`ls -lh chapter_md/0[89]?_*.tagged.md`
2. 验证标注质量：使用 `scripts/validate_tagging.py`
3. 提交到Git：`git add chapter_md/ && git commit`

## 预计消耗

- **时间**: 10-15分钟（12个章节）
- **Token**: 约80,000-120,000 tokens
- **费用**: 根据Claude API定价计算

---

**准备完成！现在可以开始批量处理了。**

运行命令：
```bash
./scripts/start_processing_084_095.sh
```
