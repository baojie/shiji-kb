/* 史记命名实体样式表 */

/* 基础样式 */
body {
    font-family: "Noto Serif SC", "Source Han Serif SC", serif;
    line-height: 2;
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
    background-color: #fdfdf8;
    color: #2c2c2c;
}

/* 段落间距 */
p {
    margin: 2em 0;
}

/* 人名样式 */
.person {
    color: #8B4513;
    text-decoration: underline;
    text-decoration-color: #8B451380;
    text-underline-offset: 2px;
    font-weight: 500;
    cursor: help;
}

/* 地名样式 */
.place {
    color: #B8860B;
    text-decoration: underline;
    text-decoration-color: #B8860B80;
    text-underline-offset: 2px;
    cursor: help;
}

/* 官职样式 */
.official {
    color: #8B0000;
    font-weight: 500;
    cursor: help;
}

/* 时间/纪年样式 */
.time {
    color: #008B8B;
    font-style: italic;
    cursor: help;
}

/* 朝代/氏族/国号样式 */
.dynasty {
    color: #9370DB;
    background-color: #F0E6FF;
    padding: 0 3px;
    border-radius: 2px;
    cursor: help;
}

/* 制度/典章样式 */
.institution {
    color: #4682B4;
    font-weight: 500;
    cursor: help;
}

/* 族群/部落样式 */
.tribe {
    color: #2F4F4F;
    font-weight: 500;
    cursor: help;
}

/* 器物样式 */
.artifact {
    color: #CD853F;
    font-weight: 500;
    cursor: help;
}

/* 天文/历法样式 */
.astronomy {
    color: #483D8B;
    font-style: italic;
    cursor: help;
}

/* 传说生物/神话样式 */
.mythical {
    color: #8B008B;
    font-weight: 500;
    cursor: help;
}

/* 动植物样式 */
.flora-fauna {
    color: #228B22;
    font-weight: 500;
    cursor: help;
}

/* 引号内容样式（对话） */
/* 视觉设计：克制优雅的对话标记
 * - 斜体：区分对话与叙述
 * - 淡褐色背景：极淡的底色（透明度0.03），不干扰阅读
 * - 底部虚线：褐色虚线（透明度0.3），提供清晰但不突兀的视觉边界
 * - 适度内边距：左右各2px，保持文字呼吸感
 */
.quoted {
    font-style: italic;
    background-color: rgba(139, 69, 19, 0.03);
    border-bottom: 1px dashed rgba(139, 69, 19, 0.3);
    padding: 0 2px;
}

/* 章节标题 */
h1 {
    color: #8B0000;
    border-bottom: 3px solid #8B0000;
    padding-bottom: 10px;
}

h2 {
    color: #8B4513;
    border-left: 5px solid #8B4513;
    padding-left: 15px;
    margin-top: 40px;
}

h3 {
    color: #B8860B;
    margin-top: 30px;
}

/* 分隔线 */
hr {
    border: none;
    border-top: 2px solid #ddd;
    margin: 40px 0;
}

/* 引用块（对话） - 缩进两个汉字 */
blockquote {
    border: none;
    margin: 0.2em 0;
    padding: 0;
    padding-left: 2em;
    background: none;
    font-style: italic;
}

/* 长对话缩进 - 段内较长引号内容另起一行，缩进两个汉字 */
.dialogue {
    display: block;
    padding-left: 2em;
}

/* 列表样式 - 古籍风格，去除项目符号，仅缩进 */
ul, ol {
    line-height: 2;
    list-style: none;
    padding-left: 2em;
    margin: 1em 0;
}

ul li, ol li {
    margin: 0;
}

/* 段落编号 (PN - Purple Numbers) - 致敬 Doug Engelbart
 * Purple Numbers 是 Doug Engelbart 在 1960 年代提出的概念，
 * 用于为文档中的每个段落分配唯一的、可引用的编号。
 * 这一创新使得超文本链接和精确引用成为可能，
 * 是现代互联网和知识管理系统的重要基础。
 *
 * 参考 Eugene Eric Kim 的实现 (https://eekim.com/software/purple/purple.html)
 * 使用淡紫色，字体较小，显示在段落开头。
 * 点击 PN 可复制带锚点的完整 URL，便于分享和引用。
 */
.para-num {
    display: inline;
    color: #C8A8FF;  /* 淡紫色 - 参考 Purple 原始实现 */
    font-family: Helvetica, Arial, sans-serif;
    font-size: 0.75em;  /* x-small */
    font-weight: bold;
    font-style: normal;
    margin-right: 0.5em;  /* 开头位置，右边距 */
    text-decoration: none;
    vertical-align: baseline;
    font-variant-numeric: tabular-nums;
    cursor: pointer;  /* 显示为可点击 */
    transition: color 0.2s ease;
}

/* 段落编号悬停效果 */
.para-num:hover {
    color: #9370DB;  /* 深一点的紫色 */
    text-decoration: underline;
}

/* 当段落编号独立成段时（段落只包含编号），显示为块级元素 */
p:has(> .para-num:only-child) {
    margin: 0.5em 0;
}

p > .para-num:only-child {
    display: inline-block;
    margin-bottom: 0.3em;
}

/* 史记年表样式 - 突破 body max-width 限制，占满视口宽度 */
/* wrapper 同时限制高度并启用双向滚动，使 thead sticky 生效 */
.shiji-table-wrapper {
    overflow: auto;
    width: 100vw;
    max-height: 85vh;
    margin-left: calc(-50vw + 50%);
    margin-top: 2em;
    margin-bottom: 2em;
    border-top: 1px solid #d0c8a0;
    border-bottom: 1px solid #d0c8a0;
    box-shadow: 0 1px 4px rgba(90, 74, 42, 0.08);
}

.shiji-table {
    border-collapse: collapse;
    width: 100%;
    font-size: 0.85em;
    line-height: 1.7;
    font-family: "Noto Serif SC", "Source Han Serif SC", serif;
}

.shiji-table th {
    background-color: #5a4a2a;
    color: #f5f0e0;
    font-weight: bold;
    padding: 8px 12px;
    border: 1px solid #4a3c1e;
    text-align: center;
    white-space: nowrap;
    position: sticky;
    top: 0;
    z-index: 10;
    font-family: "Noto Sans SC", "Source Han Sans SC", sans-serif;
    font-size: 0.95em;
    letter-spacing: 0.05em;
}

.shiji-table td {
    padding: 6px 10px;
    border: 1px solid #e0dcc8;
    text-align: left;
    vertical-align: top;
    color: #2c2c2c;
}

.shiji-table tr.even td {
    background-color: #fdfdf8;
}

.shiji-table tr.odd td {
    background-color: #f5f0e0;
}

.shiji-table tbody tr:hover td {
    background-color: #ede8d4;
    transition: background-color 0.15s ease;
}

.shiji-table td:first-child {
    white-space: nowrap;
    font-weight: 600;
    color: #5a4a2a;
    background-color: rgba(90, 74, 42, 0.06);
    text-align: center;
    border-right: 2px solid #d0c8a0;
}

/* NOTE框 */
.note-box {
    background-color: #fffef0;
    border: 1px solid #e6e0c0;
    border-radius: 5px;
    padding: 15px 20px;
    margin: 20px 0;
}

.note-box h4 {
    color: #8B7500;
    margin-top: 0;
}

/* 正文中实体索引链接 - 不改变实体原有视觉样式 */
a.entity-link {
    text-decoration: none;
    color: inherit;
}
