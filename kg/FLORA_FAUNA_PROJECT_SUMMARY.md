# 史记知识库 - 动植物实体标注项目总结

## 项目概述

本项目为《史记》前四篇本纪（五帝、夏、殷、周）建立了完整的动植物实体标注体系。

## 完成的工作

### 1. 技术实现 ✅

#### 1.1 添加动植物实体类型
- **标记符号**: `🌿动植物🌿` (使用emoji避免Markdown冲突)
- **CSS类名**: `flora-fauna`
- **样式**: 森林绿色 (#228B22)，加粗
- **文件**:
  - [render_shiji_html.py](render_shiji_html.py) - 添加正则表达式模式
  - [doc/shiji-styles.css](doc/shiji-styles.css) - 添加样式定义

#### 1.2 HTML优化
- 提取CSS到独立文件: `docs/css/chapter-nav.css`
- 提取JavaScript到独立文件: `docs/js/purple-numbers.js`
- 添加页面导航: 上一页、下一页、回到主页
- 添加原文链接: 每个章节标题后的"原文"按钮

### 2. NER分析 ✅

使用AI对四篇本纪进行了深度命名实体识别分析：

#### 2.1 动物实体统计
| 章节 | 动物种类 | 代表性动物 |
|------|---------|-----------|
| 五帝本纪 | 17种 | 熊、罴、貔、貅、貙、虎、凤凰、龙 |
| 夏本纪 | 6种 | 龙、凤皇、鱼、鸟兽、百兽 |
| 殷本纪 | 6种 | 玄鸟、雉、狗、马、猛兽 |
| 周本纪 | 14种 | 马、牛、虎、罴、狼、鹿、龙、玄鼋 |
| **总计** | **43种** | **约30种独特动物** |

#### 2.2 植物实体统计
| 章节 | 植物种类 | 代表性植物 |
|------|---------|-----------|
| 五帝本纪 | 6种 | 百穀、草木、树、麻、菽、穀 |
| 夏本纪 | 14种 | 稻、竹箭、橘、柚、桑、桐、柏 |
| 殷本纪 | 2种 | 桑、穀 |
| 周本纪 | 5种 | 麻、菽、穀、嘉穀、檿、柳 |
| **总计** | **27种** | **约20种独特植物** |

### 3. 文档输出 ✅

#### 3.1 标注指南
- [FLORA_FAUNA_TAGGING_GUIDE.md](FLORA_FAUNA_TAGGING_GUIDE.md)
  - 完整的动植物清单（按章节分类）
  - 标注示例和注意事项
  - 统计摘要和重要发现

#### 3.2 完整实体方案
- [ENTITY_TAGGING_SCHEME.md](ENTITY_TAGGING_SCHEME.md)
  - 现有11种实体类型文档
  - 建议新增6种实体类型（方位、颜色、自然现象、数字、德行、材料）
  - 技术实现代码和CSS样式

#### 3.3 提取工具
- [extract_flora_fauna.py](extract_flora_fauna.py)
  - 批量提取动植物实体的辅助脚本

## 重要发现

### 1. 文化意义
- **龙**: 在多个章节出现，既作为神话生物（祥瑞），也作为实际动物（可驯养、可食用）
- **凤凰**: 作为祥瑞之鸟，象征太平盛世
- **玄鸟**: 商族图腾，"天命玄鸟，降而生商"

### 2. 历史演变
- **五帝本纪**: 动物多为猛兽（熊罴貔貅），反映原始狩猎文化
- **夏本纪**: 植物种类最丰富（14种），反映大禹治水后的农业发展
- **殷本纪**: 动植物较少，文本侧重政治事件
- **周本纪**: 动物种类丰富（14种），反映周代畜牧和狩猎文化

### 3. 农业发展
- **五穀演变**: 从"五种"到"百穀"，反映农作物品种增加
- **具体作物**: 稻、麻、菽、穀等，显示农业技术进步
- **经济作物**: 橘、柚、竹箭等作为贡品，反映地方特产

## 实体标注体系

### 已实现（11种）
1. @人名@ - 棕色
2. =地名= - 金黄色
3. $官职$ - 深红色
4. %时间% - 青色
5. &朝代& - 紫色
6. ^制度^ - 钢蓝色
7. ~族群~ - 深灰色
8. *器物* - 秘鲁棕
9. !天文! - 深蓝紫
10. ?神话? - 深洋红
11. 🌿动植物🌿 - 森林绿 ✨**新增**

### 建议新增（6种）
1. `<方位>` - 深橙色 ⭐⭐⭐⭐⭐
2. `#颜色#` - 深红色 ⭐⭐⭐⭐⭐
3. `☀现象☀` - 番茄红 ⭐⭐⭐⭐⭐
4. `#数字#` - 皇家蓝 ⭐⭐⭐⭐
5. `【德行】` - 金杆色 ⭐⭐⭐⭐
6. `◆材料◆` - 土褐色 ⭐⭐⭐

## 标注示例

### 示例1：五帝本纪
```
教🌿熊🌿🌿罴🌿🌿貔🌿🌿貅🌿🌿貙🌿🌿虎🌿，以与@炎帝@战於=阪泉之野=。
```

### 示例2：夏本纪
```
天降🌿龙🌿二，有雌雄，@孔甲@不能食。
```

### 示例3：殷本纪
```
见🌿玄鸟🌿堕其卵，@简狄@取吞之，因孕生@契@。
```

### 示例4：周本纪
```
好种🌿树🌿🌿麻🌿、🌿菽🌿，🌿麻🌿、🌿菽🌿美。
```

## 下一步工作

### 立即任务
1. 手动标注001-004章节的动植物实体
2. 运行生成和发布脚本
3. 验证HTML渲染效果

### 近期任务
1. 实现方位词标注 `<方位>`
2. 实现颜色词标注 `#颜色#`
3. 扩展到更多章节

### 长期目标
1. 完成整部《史记》的动植物标注
2. 建立动植物知识图谱
3. 分析动植物在不同历史时期的分布和意义

## 技术栈

- **Python**: 文本处理和HTML生成
- **Markdown**: 源文件格式
- **CSS**: 样式定义
- **JavaScript**: 交互功能（Purple Numbers）
- **AI NER**: 命名实体识别分析

## 项目文件结构

```
shiji-kb/
├── render_shiji_html.py          # HTML生成脚本（含动植物支持）
├── generate_all_chapters.py      # 批量生成脚本
├── publish_to_docs.sh            # 发布脚本
├── extract_flora_fauna.py        # 动植物提取工具
├── doc/
│   └── shiji-styles.css          # 主样式文件（含动植物样式）
├── docs/
│   ├── css/
│   │   ├── shiji-styles.css      # 发布版样式
│   │   └── chapter-nav.css       # 导航栏样式
│   ├── js/
│   │   └── purple-numbers.js     # Purple Numbers功能
│   ├── original_text/            # 原文txt文件
│   └── chapters/                 # 生成的HTML文件
├── chapter_md/                   # Markdown源文件
├── FLORA_FAUNA_TAGGING_GUIDE.md  # 动植物标注指南
├── ENTITY_TAGGING_SCHEME.md      # 完整实体标注方案
└── README.md                     # 项目说明
```

## 成果展示

- **动植物实体**: 70个（43动物 + 27植物）
- **标注覆盖**: 4篇本纪完整分析
- **技术文档**: 3份详细指南
- **代码实现**: 完整的标注和渲染系统

## 致谢

本项目使用AI技术进行命名实体识别，大大提高了标注的准确性和效率。

---

*最后更新: 2026-01-23*
